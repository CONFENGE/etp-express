# ============================================================================
# ETP EXPRESS - ENVIRONMENT VARIABLES
# ============================================================================

# Application
NODE_ENV=development
PORT=3001
APP_NAME="ETP Express"
APP_VERSION="1.0.0"

# Frontend URL (CORS)
FRONTEND_URL=http://localhost:5173
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# Database (PostgreSQL)
DATABASE_URL=postgresql://user:password@localhost:5432/etp_express
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=postgres
DB_DATABASE=etp_express
DB_SYNCHRONIZE=false
DB_LOGGING=true

# JWT Authentication
# IMPORTANT: Generate a strong secret with: openssl rand -hex 32
# Minimum 32 characters required for production security
JWT_SECRET=CHANGE_ME_USE_openssl_rand_hex_32_TO_GENERATE_SECRET
JWT_EXPIRATION=7d

# OpenAI API - GPT-4.1 nano (cost-optimized)
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_MODEL=gpt-4.1-nano
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.7

# Exa API - Search & Research
# Get your API key at: https://exa.ai/
EXA_API_KEY=exa-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# Search type: 'auto' (default), 'neural' (semantic), 'keyword' (exact match)
EXA_TYPE=auto
# Number of search results to return (1-100, default: 10)
EXA_NUM_RESULTS=10
# Enable fallback mode when Exa is unavailable (default: true)
EXA_FALLBACK_ENABLED=true

# Anti-Hallucination Agent
# Score threshold (0-100) below which content is flagged as potentially hallucinated
# Higher values = stricter verification. Recommended: 70-80
HALLUCINATION_THRESHOLD=70

# Rate Limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# LGPD Compliance
# Retention period (days) before soft-deleted accounts are hard-deleted
# Required for LGPD Art. 18, VI compliance (direito de exclus√£o)
LGPD_RETENTION_DAYS=30

# File Upload
MAX_FILE_SIZE=10485760

# PDF Generation
PDF_TIMEOUT=30000

# Logging (#608)
# Log levels are automatically configured based on NODE_ENV:
# - production: error, warn (prevents data leakage, reduces costs)
# - staging: error, warn, log (operational visibility)
# - development: error, warn, log, debug, verbose (full debugging)
# - test: error, warn (minimal logging)
# Note: LOG_LEVEL env var is no longer used - log levels are determined by NODE_ENV

# Analytics (opcional - Mixpanel ou PostHog)
ANALYTICS_ENABLED=false
MIXPANEL_TOKEN=
POSTHOG_API_KEY=
POSTHOG_HOST=https://app.posthog.com

# Sentry Error Tracking & Performance Monitoring
SENTRY_DSN=https://xxxxxxxxxxxxxxxxxxxxxxxxxxxxx@xxxxx.ingest.sentry.io/xxxxxxxxxxxxx
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_ENVIRONMENT=development

# Redis (for BullMQ job queue)
# Railway automatically injects REDIS_URL when Redis service is added
# Format: redis://:password@host:port
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# OpenTelemetry Distributed Tracing (#857)
# OTEL_EXPORTER_OTLP_ENDPOINT: HTTP endpoint for OTLP trace export
# Supported backends: Jaeger, Zipkin, Railway observability, Sentry, etc.
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318/v1/traces
# OTEL_EXPORTER_OTLP_HEADERS: Optional headers for authenticated endpoints (JSON format)
# Example: {"Authorization": "Bearer token"}
OTEL_EXPORTER_OTLP_HEADERS=
# OTEL_SERVICE_NAME: Service name shown in traces (default: etp-express-backend)
OTEL_SERVICE_NAME=etp-express-backend

# ============================================================================
# GOVERNMENT APIS CONFIGURATION
# ============================================================================
# Documentation: docs/gov-api-configuration.md

# Exa Fallback (used when government APIs return insufficient results)
# Threshold: minimum results before triggering Exa fallback (default: 3)
EXA_FALLBACK_THRESHOLD=3

# Government API Cache TTL Overrides (optional)
# Default: PNCP/Compras.gov = 3600 (1h), SINAPI/SICRO = 604800 (7d)
# GOV_API_CACHE_PNCP_TTL=3600
# GOV_API_CACHE_PNCP_ENABLED=true
# GOV_API_CACHE_COMPRASGOV_TTL=3600
# GOV_API_CACHE_COMPRASGOV_ENABLED=true
# GOV_API_CACHE_SINAPI_TTL=604800
# GOV_API_CACHE_SINAPI_ENABLED=true
# GOV_API_CACHE_SICRO_TTL=604800
# GOV_API_CACHE_SICRO_ENABLED=true

# ============================================================================
# SINAPI API (Orcamentador) - #1539, #1564
# ============================================================================
# Documentation: docs/integrations/SINAPI_API.md
# Get API key at: https://orcamentador.com.br/api/

# API Authentication
# Obtain key via contact form at orcamentador.com.br/api
SINAPI_API_KEY=
SINAPI_API_BASE_URL=https://orcamentador.com.br/api
SINAPI_API_TIMEOUT=30000

# Rate Limiting & Retry
# Free tier: 100 requests/hour
SINAPI_API_RETRY_ATTEMPTS=3
SINAPI_API_RETRY_DELAY=1000

# Webhook for SINAPI updates
# Secret for validating webhook signatures (HMAC SHA256)
SINAPI_WEBHOOK_SECRET=
SINAPI_WEBHOOK_ENABLED=true

# Cache
# TTL in seconds (default: 24h = 86400)
SINAPI_CACHE_TTL=86400
# Pre-populate cache with popular items on startup
SINAPI_CACHE_WARMUP_ENABLED=true

# Railway Specific (auto-injected in production)
# DATABASE_URL=${{Postgres.DATABASE_URL}}
# REDIS_URL=${{Redis.REDIS_URL}}
# PORT=${{PORT}}
# RAILWAY_GIT_COMMIT_SHA=${{RAILWAY_GIT_COMMIT_SHA}} (usado para release tracking)
